<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        
        <title>WPF Designer & Custom Dependency Properties</title>
        
        <meta name="description" content="We needed a custom WPF layout for a work project so we merrily set about extending [Panel](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel%28v=vs.110%29.aspx) and implementing our [MeasureOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.measureoverride%28v=vs.110%29.aspx) and [ArrangeOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.arrangeoverride%28v=vs.110%29.aspx) methods. However, we had some issues with the designer not responding well to XAML changes for our custom dependency properties. The solution turned out to be simple. Register the property with [FrameworkPropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata%28v=vs.110%29.aspx) instead of [PropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.propertymetadata%28v=vs.110%29.aspx) and set the [AffectsArrange](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.affectsarrange%28v=vs.110%29.aspx) and [AffectsMeasure](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.affectsmeasure%28v=vs.110%29.aspx) flags.">
	<meta name="author" content="Jason Deabill">
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="incongruousm">
	<meta name="twitter:title" content="WPF Designer & Custom Dependency Properties">
	<meta name="twitter:description" content="We needed a custom WPF layout for a work project so we merrily set about extending [Panel](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel%28v=vs.110%29.aspx) and implementing our [MeasureOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.measureoverride%28v=vs.110%29.aspx) and [ArrangeOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.arrangeoverride%28v=vs.110%29.aspx) methods. However, we had some issues with the designer not responding well to XAML changes for our custom dependency properties. The solution turned out to be simple. Register the property with [FrameworkPropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata%28v=vs.110%29.aspx) instead of [PropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.propertymetadata%28v=vs.110%29.aspx) and set the [AffectsArrange](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.affectsarrange%28v=vs.110%29.aspx) and [AffectsMeasure](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.affectsmeasure%28v=vs.110%29.aspx) flags.">
	<meta name="twitter:creator" content="incongruousm">
	<meta name="twitter:image:src" content="../../cache/incongruousm.jpg">
	<meta name="twitter:domain" content="http://jason.deabill.net/wpf-designer-dependency-props">
	<meta property="og:type" content="article">
	<meta property="og:title" content="WPF Designer & Custom Dependency Properties">
	<meta property="og:site_name" content="WPF Designer & Custom Dependency Properties">
	<meta property="og:url" content="http://jason.deabill.net/wpf-designer-dependency-props">
	<meta property="og:description" content="We needed a custom WPF layout for a work project so we merrily set about extending [Panel](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel%28v=vs.110%29.aspx) and implementing our [MeasureOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.measureoverride%28v=vs.110%29.aspx) and [ArrangeOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.arrangeoverride%28v=vs.110%29.aspx) methods. However, we had some issues with the designer not responding well to XAML changes for our custom dependency properties. The solution turned out to be simple. Register the property with [FrameworkPropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata%28v=vs.110%29.aspx) instead of [PropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.propertymetadata%28v=vs.110%29.aspx) and set the [AffectsArrange](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.affectsarrange%28v=vs.110%29.aspx) and [AffectsMeasure](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.affectsmeasure%28v=vs.110%29.aspx) flags.">
	<meta property="og:image" content="../../cache/incongruousm.jpg">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link rel="stylesheet" href="http://jason.deabill.net/templates/simple-two/style.css">
        <link href="http://fonts.googleapis.com/css?family=Noto+Sans:400,400italic,700,700italic" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="http://jason.deabill.net/templates/simple-two/css/font-awesome.min.css">
        
            <!-- RSS Feed Links -->
    <link rel="alternate" type="application/rss+xml" title="Subscribe using RSS" href="http://jason.deabill.net/rss" />
    <link rel="alternate" type="application/atom+xml" title="Subscribe using Atom" href="http://jason.deabill.net/atom" />
    
    <!-- Dropplets Styles -->
    <link rel="stylesheet" href="http://jason.deabill.net/dropplets/style/style.css">
    <link rel="shortcut icon" href="http://jason.deabill.net/dropplets/style/images/favicon.png">

    <!-- User Header Injection -->
        
    <!-- Plugin Header Injection -->
       <link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/sunburst.min.css">
   <style>
   .galleria{height:380px}
   </style>
    </head>

    <body>
                <div class="container">
                        <section>
    <header class="title">
        <h2>WPF Designer &amp; Custom Dependency Properties</h2>
        <p>
            <span>May 30, 2014</span>- Posted in <a href="http://jason.deabill.net/category/tech" rel="category tag">Tech</a>
            <span>Posted by: Jason Deabill</span>
        </p>
    </header>
    <article>
        <p>We needed a custom WPF layout for a work project so we merrily set about extending <a href="http://msdn.microsoft.com/en-us/library/system.windows.controls.panel%28v=vs.110%29.aspx">Panel</a> and implementing our <a href="http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.measureoverride%28v=vs.110%29.aspx">MeasureOverride</a> and <a href="http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.arrangeoverride%28v=vs.110%29.aspx">ArrangeOverride</a> methods. However, we had some issues with the designer not responding well to XAML changes for our custom dependency properties. The solution turned out to be simple. Register the property with <a href="http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata%28v=vs.110%29.aspx">FrameworkPropertyMetadata</a> instead of <a href="http://msdn.microsoft.com/en-us/library/system.windows.propertymetadata%28v=vs.110%29.aspx">PropertyMetadata</a> and set the <a href="http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.affectsarrange%28v=vs.110%29.aspx">AffectsArrange</a> and <a href="http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.affectsmeasure%28v=vs.110%29.aspx">AffectsMeasure</a> flags.</p>
<pre><code class="language-csharp">static DependencyProperty MyCustomMarginProperty
         = DependencyProperty.Register("MyCustomMargin",
                                       typeof (double),
                                       typeof (MyControl),
                                       new FrameworkPropertyMetadata(default(double))
                                          {
                                             AffectsArrange = true,
                                             AffectsMeasure = true
                                          });</code></pre>    </article>
    <a href="http://jason.deabill.net/" class="back-to-blog"><i class="fa fa-chevron-left"></i>Back to blog</a>
</section>                    </div>
        
            <!-- jQuery & Required Scripts -->
    <script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
    
        
    <!-- Dropplets Tools -->
    
<div class="dp-panel-wrapper " id="dp-dropplets">
    <div class="dp-panel">
        <div class="dp-row profile">
            <div class="dp-icon">
                <img src="../../cache/incongruousm.jpg" alt="jason.deabill.net" />
            </div>
            
            <div class="dp-content">
                <span class="title">Hey There!</span>
                <a class="dp-button dp-button-dark dp-close dp-icon-close" href="#dp-dropplets"></a>
            </div>
        </div>
        
        <div class="dp-row dp-editable dp-editable-dark">
            <div class="dp-icon dp-icon-key"></div>
            
            <div class="dp-content">
                <form method="POST" action="?action=login">
                    <label>Enter Your Password</label>
                    <input type="password" name="password" id="password">
                    <button class="dp-icon-checkmark" type="submit" name="submit" value="submit"></button>
                </form>
            </div>
        </div>
        
                
        <div class="dp-row">
            <div class="dp-icon dp-icon-dropplets"></div>
            <div class="dp-content">What is This?</div>
            <a class="dp-link" href="http://dropplets.com" target="_blank"></a>
        </div>
    </div>
</div>


<a class="dp-open dp-icon-dropplets" id="dp-dropplets-icon" href="#dp-dropplets"></a>

<script type="text/javascript" src="http://jason.deabill.net/dropplets/includes/js/cookies.js"></script>
<script type="text/javascript">
    jQuery(document).ready(function($) {
        $(".dp-open").click(function(){
            var myelement = $(this).attr("href")
            $(myelement).animate({left:"0"}, 200);
            $.cookies.set('dp-panel', 'open');
            $("body").css({ overflowY: 'hidden' });
            return false;
        });
        
        $(".dp-close").click(function(){
            var myelement = $(this).attr("href")
            $(myelement).animate({left:"-300px"}, 200);
            $.cookies.set('dp-panel', 'closed');
            $("body").css({ overflowY: 'auto' });
            return false;
        });
        
        $(".dp-toggle").click(function(){
            var myelement = $(this).attr("href")
            $(myelement).toggle();
            $(this).next('button.dp-button-submit').toggle();
            return false;
        });
        
        // For Input Labels
        $('input, textarea').focus(function () {
            $(this).prev('label').hide(200);
        })
        .blur(function () {
            $(this).prev('label').show(200);
        });
    });
</script>
    
    
    <!-- User Footer Injection -->
        
    <!-- Plugin Footer Injection -->
    <script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<script>
   hljs.initHighlightingOnLoad();
</script>
<script type="text/javascript" src="http://jason.deabill.net/plugins/galleria/galleria-1.3.5.min.js"></script>
<script>
   var galleries = $('.galleria').length;
   if (galleries > 0) {
      Galleria.loadTheme('http://jason.deabill.net/plugins/galleria/themes/classic/galleria.classic.min.js');
      Galleria.configure({
         autoplay: true,
         lightbox: true,
         extend: function() {
            if ( this.getDataLength() < 2 ) {
               $('.galleria-thumblink, .galleria-play, .galleria-counter, .galleria-s1, .galleria-s2, .galleria-image-nav').hide(); 
            }
         }
      });
      Galleria.run('.galleria');
   };
</script>
    </body>
</html>
